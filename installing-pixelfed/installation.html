<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Generic installation process | Pixelfed Documentation</title>
    <meta name="description" content="Documentation for pixelfed">
    
    
    <link rel="preload" href="/assets/css/0.styles.1aed94de.css" as="style"><link rel="preload" href="/assets/js/app.b7dfad19.js" as="script"><link rel="preload" href="/assets/js/2.a454a886.js" as="script"><link rel="preload" href="/assets/js/10.847782ba.js" as="script"><link rel="prefetch" href="/assets/js/11.9126097e.js"><link rel="prefetch" href="/assets/js/12.a859a875.js"><link rel="prefetch" href="/assets/js/13.47743d9a.js"><link rel="prefetch" href="/assets/js/14.fe6f5b30.js"><link rel="prefetch" href="/assets/js/15.82064967.js"><link rel="prefetch" href="/assets/js/16.c6769722.js"><link rel="prefetch" href="/assets/js/17.e60e44fe.js"><link rel="prefetch" href="/assets/js/18.8dbe3c97.js"><link rel="prefetch" href="/assets/js/19.f0fd36f9.js"><link rel="prefetch" href="/assets/js/20.43e0f5b1.js"><link rel="prefetch" href="/assets/js/21.8b1776f4.js"><link rel="prefetch" href="/assets/js/3.6b092af1.js"><link rel="prefetch" href="/assets/js/4.a6bdcb64.js"><link rel="prefetch" href="/assets/js/5.50d77a97.js"><link rel="prefetch" href="/assets/js/6.ca635446.js"><link rel="prefetch" href="/assets/js/7.05ec0d20.js"><link rel="prefetch" href="/assets/js/8.2e33560f.js"><link rel="prefetch" href="/assets/js/9.f8eab9c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1aed94de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://avatars0.githubusercontent.com/u/38410642?s=200&amp;v=4" alt="Pixelfed Documentation" class="logo"> <span class="site-name can-hide">Pixelfed Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://pixelfed.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pixelfed.org
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/pixelfed/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://pixelfed.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pixelfed.org
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/pixelfed/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Installing Pixelfed</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installing-pixelfed/prerequisites.html" class="sidebar-link">Pre-requisites</a></li><li><a href="/installing-pixelfed/installation.html" class="active sidebar-link">Generic installation process</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#download-source-via-git" class="sidebar-link">Download source via Git</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#set-correct-permissions" class="sidebar-link">Set correct permissions</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#initialize-php-dependencies" class="sidebar-link">Initialize PHP dependencies</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#configure-pixelfed" class="sidebar-link">Configure Pixelfed</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#app-variables" class="sidebar-link">App variables</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#database-variables" class="sidebar-link">Database variables</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#redis-variables" class="sidebar-link">Redis variables</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#email-variables" class="sidebar-link">Email variables</a></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#additional-variables" class="sidebar-link">Additional variables</a></li></ul></li><li class="sidebar-sub-header"><a href="/installing-pixelfed/installation.html#final-steps" class="sidebar-link">Final steps</a></li></ul></li><li><a href="/installing-pixelfed/postinstall.html" class="sidebar-link">Post-installation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Running Pixelfed</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/running-pixelfed/administration.html" class="sidebar-link">Administration</a></li><li><a href="/running-pixelfed/migration.html" class="sidebar-link">Migrating to another machine</a></li><li><a href="/running-pixelfed/troubleshooting.html" class="sidebar-link">Troubleshooting your Pixelfed installation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Technical documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technical-documentation/api.html" class="sidebar-link">v1 API</a></li><li><a href="/technical-documentation/artisan.html" class="sidebar-link">Laravel Artisan</a></li><li><a href="/technical-documentation/env.html" class="sidebar-link">Configuration</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Distro-specific Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="generic-installation-process"><a href="#generic-installation-process" aria-hidden="true" class="header-anchor">#</a> Generic installation process</h1> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>Pixelfed is still a work in progress. We do not recommending running an instance in production at this stage unless you know what you are doing!</p></div> <p>Make sure you have all prerequisites installed and the appropriate services running/enabled.</p> <p></p><div class="table-of-contents"><ul><li><a href="#download-source-via-git">Download source via Git</a></li><li><a href="#set-correct-permissions">Set correct permissions</a></li><li><a href="#initialize-php-dependencies">Initialize PHP dependencies</a></li><li><a href="#configure-pixelfed">Configure Pixelfed</a><ul><li><a href="#app-variables">App variables</a></li><li><a href="#database-variables">Database variables</a></li><li><a href="#redis-variables">Redis variables</a></li><li><a href="#email-variables">Email variables</a></li><li><a href="#additional-variables">Additional variables</a></li></ul></li><li><a href="#final-steps">Final steps</a></li></ul></div><p></p> <h2 id="download-source-via-git"><a href="#download-source-via-git" aria-hidden="true" class="header-anchor">#</a> Download source via Git</h2> <p>Pixelfed Beta currently uses the <code>dev</code> branch for deployable code. When v1.0 is released, the stable branch will be changed to <code>master</code>, with <code>dev</code> branch being used for development and testing.</p> <div class="language-bash extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br></div><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /home <span class="token comment"># or wherever you choose to install web applications</span>
$ <span class="token function">git</span> clone -b dev https://github.com/pixelfed/pixelfed.git pixelfed <span class="token comment"># checkout dev branch into &quot;pixelfed&quot; folder</span>
</code></pre></div><h2 id="set-correct-permissions"><a href="#set-correct-permissions" aria-hidden="true" class="header-anchor">#</a> Set correct permissions</h2> <p>Your web server and app processes need to be able to write to the Pixelfed directory. Make sure to set the appropriate permissions. For example, if you are running your processes through the <code>http</code> user/group, then run the following:</p> <div class="language-bash extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br></div><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> pixelfed
$ <span class="token function">sudo</span> <span class="token function">chown</span> -R http:http <span class="token builtin class-name">.</span> <span class="token comment"># change user/group to http user and http group</span>
$ <span class="token function">sudo</span> <span class="token function">find</span> <span class="token builtin class-name">.</span> -type d -exec <span class="token function">chmod</span> <span class="token number">755</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> <span class="token comment"># set all directories to rwx by user/group</span>
$ <span class="token function">sudo</span> <span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -exec <span class="token function">chmod</span> <span class="token number">644</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> <span class="token comment"># set all files to rw by user/group</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">User and group permissions</p> <p>Make sure to use the correct user/group name for your system. This may be <code>http</code>, <code>www-data</code>, or <code>pixelfed</code> (if using a dedicated user).</p> <p>If you created a dedicated app user, make sure to either add the app user to the web group, or add the web user to the app group. Also, you will need to set 775 for directories and 664 for files, so that both your dedicated app user and your web user can read and write to files in the Pixelfed installation.</p></div> <h2 id="initialize-php-dependencies"><a href="#initialize-php-dependencies" aria-hidden="true" class="header-anchor">#</a> Initialize PHP dependencies</h2> <p>Run <code>composer install</code> to fetch the dependencies needed by Pixelfed. It is recommended to run with the following flags:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ composer <span class="token function">install</span> --no-ansi --no-interaction --optimize-autoloader
</code></pre></div><h2 id="configure-pixelfed"><a href="#configure-pixelfed" aria-hidden="true" class="header-anchor">#</a> Configure Pixelfed</h2> <p>By default Pixelfed comes with a <code>.env.example</code> file for production deployments, and a <code>.env.testing</code> file for debug deployments. You'll need to rename or copy one of these files to <code>.env</code> regardless of which environment you're working on.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cp</span> .env.example .env <span class="token comment"># for production deployments</span>
$ <span class="token function">cp</span> .env.testing .env <span class="token comment"># for debug deployments</span>
</code></pre></div><p>You can now edit <code>.env</code> and change values for your setup.</p> <div class="tip custom-block"><p class="custom-block-title">List of environment variables</p> <p>You can find a list of additional configuration settings in-depth on the <a href="/technical-documentation/env.html">Configuration</a> page, but the important variables will be listed in the below subsections.</p></div> <h3 id="app-variables"><a href="#app-variables" aria-hidden="true" class="header-anchor">#</a> App variables</h3> <ul><li>Set <code>APP_NAME</code> to your desired title, e.g. <code>Pixelfed</code>. This will be shown in the header bar and other places.</li> <li>Ensure that <code>APP_DEBUG</code> is <code>false</code> for production environments, or <code>true</code> for debug environments.</li> <li>Set your <code>APP_URL</code> to the HTTPS URL that you wish to serve Pixelfed through, e.g. <code>https://pixelfed.example</code></li> <li>Set <code>APP_DOMAIN</code>, <code>ADMIN_DOMAIN</code>, and <code>SESSION_DOMAIN</code> to the domain name you will be using for Pixelfed, e.g. <code>pixelfed.example</code></li></ul> <h3 id="database-variables"><a href="#database-variables" aria-hidden="true" class="header-anchor">#</a> Database variables</h3> <p>By default, the values provided will allow connecting to MySQL or MariaDB over the default localhost TCP connection.</p> <p>If you are running Postgres:</p> <ul><li>Set <code>DB_CONNECTION</code> to <code>pgsql</code> instead of <code>mysql</code>.</li></ul> <p>If you are running your SQL server on a different machine or port:</p> <ul><li>Set <code>DB_HOST</code> to the IP of the machine</li> <li>Set <code>DB_PORT</code> to the port on which your database server is exposed</li></ul> <p>To connect to the database you created:</p> <ul><li>Set <code>DB_DATABASE</code> to the name of the database created for Pixelfed</li> <li>Set <code>DB_USERNAME</code> to the user that was granted privileges for that database</li> <li>Set <code>DB_PASSWORD</code> to the password that identifies the user with privileges to the database</li></ul> <h3 id="redis-variables"><a href="#redis-variables" aria-hidden="true" class="header-anchor">#</a> Redis variables</h3> <p>If you are running Redis over TCP on the same machine as Pixelfed, then the default settings will work.</p> <p>If you are running Redis on another machine:</p> <ul><li>Set <code>REDIS_HOST</code> to the IP of the machine your Redis server is running on</li> <li>Set <code>REDIS_PORT</code> to the port on which Redis is exposed</li> <li>Set <code>REDIS_PASSWORD</code> to the password of that Redis server</li></ul> <p>If you are using a UNIX socket for Redis, then:</p> <ul><li>Set <code>REDIS_SCHEME</code> to <code>unix</code></li> <li>Set <code>REDIS_PATH</code> to the path of the socket, e.g. <code>/run/redis/redis.sock</code></li></ul> <div class="tip custom-block"><p class="custom-block-title">TCP server vs. UNIX socket</p> <p>Redis usually comes pre-configured to listen for TCP requests on the local machine over port 6379. In your Redis configuration, typically at <code>/etc/redis.conf</code>, the relevant lines are <code>bind 127.0.0.1</code> and <code>port 6379</code>.</p> <p>Changing the latter line to <code>port 0</code> will disable TCP listening, in which case Redis must be configured for socket access. Lines such as <code>unixsocket /run/redis/redis.sock</code> and <code>unixsocketperm 770</code> must be set to enable socket access. Additionally, both the app user and web user should have permission to access the socket, e.g. by being added to the <code>redis</code> group.</p> <p>Using a UNIX socket is optional, but may provide faster access since it does not have to create TCP packets. TCP is usually used over a network, and would be required if Redis were running on a different machine than your web server.</p></div> <h3 id="email-variables"><a href="#email-variables" aria-hidden="true" class="header-anchor">#</a> Email variables</h3> <p>By default, Pixelfed will not send any emails, but will instead write messages to the Laravel log.</p> <p>To setup a mailer for production deployments, you have several options for supported mail services. <a href="/technical-documentation/env.html">Configuration#mail</a></p> <h3 id="additional-variables"><a href="#additional-variables" aria-hidden="true" class="header-anchor">#</a> Additional variables</h3> <p>If you are using ImageMagick, then:</p> <ul><li>Set <code>IMAGE_DRIVER</code> to <code>imagick</code></li></ul> <p>For testing environments:</p> <ul><li>Set <code>ENFORCE_EMAIL_VERIFICATION</code> to <code>false</code></li></ul> <p>For production environments, you will probably want to set various config values related to your deployment. A full list of environment variables can be found <a href="/technical-documentation/env.html">here.</a></p> <h2 id="final-steps"><a href="#final-steps" aria-hidden="true" class="header-anchor">#</a> Final steps</h2> <p>If you copied <code>.env.testing</code> to set up a development environment, the application secret is pre-generated for you. If you copied <code>.env.example</code> to set up a production environment, then you need to generate the secret <code>APP_KEY</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan key:generate
</code></pre></div><p>Every time you edit your .env file, you must run this command to have the changes take effect:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan config:cache
</code></pre></div><p>One time only, the <code>storage/</code> directory must be linked to the application:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan storage:link
</code></pre></div><p>Database migrations must be run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan migrate --force
</code></pre></div><p>If you want to access the Horizon web dashboard:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan horizon:install
$ php artisan horizon:assets
</code></pre></div><p>Routes should be cached whenever the source code changes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php artisan route:cache
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/pixelfed/docs/edit/master/installing-pixelfed/installation.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/installing-pixelfed/prerequisites.html" class="prev">
          Pre-requisites
        </a></span> <span class="next"><a href="/installing-pixelfed/postinstall.html">
          Post-installation
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b7dfad19.js" defer></script><script src="/assets/js/2.a454a886.js" defer></script><script src="/assets/js/10.847782ba.js" defer></script>
  </body>
</html>
